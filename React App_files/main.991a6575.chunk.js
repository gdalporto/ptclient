(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,n){e.exports=n(253)},206:function(e,t,n){},207:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),c=n(106),s=n.n(c),i=n(259),l=n(8),u=n(107),m=n(104),p=n(54),d=n.n(p),h="https://obscure-eyrie-82877.herokuapp.com",f=function(){return localStorage.getItem("authToken")},E=function(){try{localStorage.removeItem("authToken")}catch(e){}},g=function(e){return{type:"SAVE_LOADING_CORE_DATA",loadingData:e}},v=function(e){return{type:"SAVE_LOADING_USER",loadingUser:e}},b=function(){return function(e){var t;e(v({loadingUser:!0}));var n=f(),a=d()(n);fetch("".concat(h,"/authcheck"),{method:"GET",headers:{authorization:"Bearer ".concat(n)}}).then(function(e){return e.json()}).then(function(r){"authenticated"===(t=r.status)&&fetch("".concat(h,"/protected/user"),{method:"GET",headers:{authorization:"Bearer ".concat(n),id:a.user.id}}).then(function(e){return e.json()}).then(function(t){var n;console.log("USER FETCHED.",t),e({type:"SAVE_USER_TO_STATE",id:(n=t).user.id,username:n.user.username,condition:n.user.condition,treatments:n.user.treatments,log:n.user.log})}).then(function(){e(v({loadingUser:!1}))}).catch(function(n){return console.error(n),t="unauthenticated",console.log("ERROR, STAT IS",t),e(v({loadingUser:!1})),t})}).catch(function(n){return console.error(n),t="unauthenticated",console.log("ERROR STAT IS",t),e(v({loadingUser:!1})),t})}},O={user:[],treatments:{},conditions:[],loadingData:!0,loadingUser:!0},y=n(17),j=n(43),N=n(29),T=n(53),k=function(e){return e.ok?e:e.headers.has("content-type")&&e.headers.get("content-type").startsWith("application/json")?e.json().then(function(e){return Promise.reject(e)}):Promise.reject({code:e.status,message:e.statusText})},S="SET_AUTH_TOKEN",U=function(e){return{type:S,authToken:e}},w="CLEAR_AUTH",A=function(){return{type:w}},R="AUTH_REQUEST",C=function(){return{type:R}},D="AUTH_SUCCESS",I="AUTH_ERROR",L=function(e){return{type:I,error:e}},B="LOG_TREATMENT_STATE",_=function(e){return function(t){var n={date:e.date,treatment:e.treatment,status:e.status,currentUser:e.currentUser},a=n.currentUser,r={},o={};a.log.forEach(function(e){o=Object(N.a)({},o,e)});var c=Object.keys(o),s=[n.date];c.forEach(function(e){e!==s[0]&&(s=[].concat(Object(j.a)(s),[e]))}),s.sort(),s.forEach(function(e,t){var o=a.log[t];if(n.date!==e)r=Object(N.a)({},r,o);else if(n.date===e){var c={};if(o){var s=Object(y.a)({},n.treatment,n.status),i={},l={},u=Object.keys(o),m=Object.keys(o[u]),p=[n.treatment];m.forEach(function(e){e!==p[0]&&(p=[].concat(Object(j.a)(p),[e]))}),p.forEach(function(e){var n=a.log[t][u][e];l=Object(y.a)({},e,n),i=Object(N.a)({},i,l,s)}),c=Object(y.a)({},n.date,i),r=Object(N.a)({},r,c)}else c=Object(y.a)({},n.date,Object(y.a)({},n.treatment,n.status)),r=Object(N.a)({},r,c)}});var i=Object.keys(r).map(function(e){return Object(y.a)({},e,r[e])});return a=Object(N.a)({},a,{log:i}),t(x(a)),t(function(e){return{type:B,user:e}}(a)),fetch("".concat(h,"/user/updatelog"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a)}).then(function(e){return k(e)}).then(function(e){return e.json()}).then(function(e){return t(b())}).catch(function(e){var t=e.reason,n=e.message,a=e.location;if("ValidationError"===t)return Promise.reject(new T.a(Object(y.a)({},a,n)))})}},P=function(e,t){var n,a=d()(e);t(U(e)),t((n=a.user,{type:D,currentUser:n})),function(e){try{localStorage.setItem("authToken",e)}catch(t){}}(e)},W=function(e,t){return function(n){return n(C()),fetch("".concat(h,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then(function(e){return k(e)}).then(function(e){return e.json()}).then(function(e){var t=e.authToken;return P(t,n)}).catch(function(e){var t=401===e.code?"Incorrect username or password":"Unable to login, please try again";return n(L(e)),Promise.reject(new T.a({_error:t}))})}},x=function(e){return function(t,n){t(C());var a=n().auth.authToken;return fetch("".concat(h,"/auth/refresh/newpayload"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({id:e.id,username:e.username,condition:e.condition,treatments:e.treatments,log:e.log})}).then(function(e){return k(e)}).then(function(e){return e.json()}).then(function(e){var n=e.authToken;P(n,t)}).catch(function(e){t(L(e)),t(A()),E()})}},H=function(){return function(e,t){e(C());var n=t().auth.authToken;return fetch("".concat(h,"/auth/refresh"),{method:"POST",headers:{Authorization:"Bearer ".concat(n)}}).then(function(e){return k(e)}).then(function(e){return e.json()}).then(function(t){var n=t.authToken;return P(n,e)}).catch(function(t){e(L(t)),e(A()),E()})}},F={authToken:null,currentUser:{username:null,condition:null,treatments:[],log:[]}};var M=n(108),G=Object(l.createStore)(Object(l.combineReducers)({form:m.a,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;if(t.type===S)return Object.assign({},e,{authToken:t.authToken});if(t.type===w)return Object.assign({},e,{authToken:null,currentUser:{username:null,condition:null,treatments:[],log:[]}});if(t.type===R)return Object.assign({},e,{loading:!0,error:null});if(t.type===D)return Object.assign({},e,{loading:!1,currentUser:t.currentUser});if(t.type===I)return Object.assign({},e,{loading:!1,error:t.error});if(t.type===B){var n=t.user;return Object.assign({},e,{currentUser:n})}return e},reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;return"SAVE_USER_TO_STATE"===t.type?Object.assign({},e,{user:[{id:t.id,username:t.username,condition:t.condition,treatments:t.treatments,log:t.log}]}):"CLEAR_USER"===t.type?Object.assign({},e,{users:[]}):"SAVE_LOADING_CORE_DATA"===t.type?Object.assign({},e,{loadingData:t.loadingData.loadingData}):"SAVE_LOADING_USER"===t.type?Object.assign({},e,{loadingUser:t.loadingUser.loadingUser}):"UPDATE_TREATMENT_STATE"===t.type?Object.assign({},e,{treatments:t.treatments}):"UPDATE_CONDITION_STATE"===t.type?Object.assign({},e,{conditions:t.conditions}):e}}),Object(M.composeWithDevTools)(Object(l.applyMiddleware)(u.a))),V=f();if(V){var J=V;G.dispatch(U(J)),G.dispatch(H())}var z,Y,$=G,q=(n(206),n(9)),K=n(10),Q=n(12),X=n(11),Z=n(13),ee=n(109),te=n(260),ne=n(257),ae=n(256),re=(n(207),function(e){function t(){return Object(q.a)(this,t),Object(Q.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(K.a)(t,[{key:"logOutUser",value:function(e){console.log("LOG OUT USER")}},{key:"pickNav",value:function(){var e,t;return this.props.username?(e="Log Out",t="/logout",r.a.createElement("nav",{className:"topnav",role:"navigation"},r.a.createElement(ae.a,{className:"link",activeClassName:"activeLink",to:"/dashboard"},"Dashboard"),r.a.createElement(ae.a,{className:"link",activeClassName:"activeLink",to:"/history"},"History"),r.a.createElement("div",{className:"topnav-right"},r.a.createElement(ae.a,{className:"link",activeClassName:"activeLink",to:t},e)))):(e="Log in",t="/login","Sign up","/register",r.a.createElement("nav",{className:"topnav",role:"navigation"},r.a.createElement(ae.a,{className:"link",activeClassName:"activeLink",exact:!0,to:"/"},"PT"),r.a.createElement("div",{className:"topnav-right"},r.a.createElement(ae.a,{className:"link",activeClassName:"activeLink",to:t},e),r.a.createElement(ae.a,{className:"link",activeClassName:"activeLink",to:"/register"},"Sign up"))))}},{key:"render",value:function(){return r.a.createElement("div",{className:"headerContainer"},this.pickNav())}}]),t}(r.a.Component)),oe=Object(o.b)(function(e){return{username:e.auth.currentUser.username,condition:e.auth.currentUser.condition}},null,null,{pure:!1})(re),ce=n(258),se=n(77),ie=n(102),le=n(103),ue=n(28),me=function(e){function t(){return Object(q.a)(this,t),Object(Q.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(K.a)(t,[{key:"componentDidUpdate",value:function(e){!e.meta.active&&this.props.meta.active&&this.input.focus()}},{key:"render",value:function(){var e,t,n=this;return this.props.meta.touched&&this.props.meta.error&&(e=r.a.createElement("div",{className:"form-error"},this.props.meta.error)),this.props.meta.touched&&this.props.meta.warning&&(t=r.a.createElement("div",{className:"form-warning"},this.props.meta.warning)),r.a.createElement("div",{className:"form-input"},r.a.createElement("label",{htmlFor:this.props.input.name},this.props.label,e,t),r.a.createElement("input",Object.assign({},this.props.input,{id:this.props.input.name,type:this.props.type,ref:function(e){return n.input=e}})))}}]),t}(r.a.Component),pe=function(e){return e?void 0:"Required"},de=function(e){return""!==e.trim()?void 0:"Cannot be empty"},he=function(e){return/^\S+@\S+$/.test(e)?void 0:"Must be a valid email address"},fe=(z={min:10,max:72},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return z.min&&e.length<z.min?"Must be at least ".concat(z.min," characters long"):z.max&&e.length>z.max?"Must be at most ".concat(z.max," characters long"):void 0}),Ee=(Y="password",function(e,t){return Y in t&&e.trim()===t[Y].trim()?void 0:"Does not match"}),ge=function(e){function t(){return Object(q.a)(this,t),Object(Q.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(K.a)(t,[{key:"onSubmit",value:function(e){var t=this,n=e.username,a=e.password,r=e.condition,o=this.props.conditions.find(function(e){return!!e[r]});console.log("TREATMEWNT OBJECT",o);var c=o[r];console.log("TREATMENT WRAPPER",c);var s=Object(j.a)(c);console.log("TREATMENTS",s);var i={username:n,password:a,condition:r,treatments:s,log:[]};return this.props.dispatch(function(e){return function(t){return console.log("USER",e),fetch("".concat(h,"/user"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return k(e)}).then(function(e){return e.json()}).catch(function(e){var t=e.reason,n=e.message,a=e.location;if("ValidationError"===t)return Promise.reject(new T.a(Object(y.a)({},a,n)))})}}(i)).then(function(){return t.props.dispatch(W(n,a))})}},{key:"render",value:function(){var e=this;return console.log("INSIDE RENDER ON REGISTRATION FORM",this.props.users),"loggedIn"===this.props.authStatus?r.a.createElement(ce.a,{to:"/dashboard"}):r.a.createElement("form",{className:"registrationForm",onSubmit:this.props.handleSubmit(function(t){return e.onSubmit(t)})},r.a.createElement("label",{htmlFor:"username"},"UserName (you@you.com)"),r.a.createElement(ie.a,{name:"username",type:"email",component:me,validate:[pe,de,he]}),r.a.createElement("label",{htmlFor:"password"},"Enter password (10-72 chars)"),r.a.createElement(ie.a,{name:"password",type:"password",component:me,validate:[pe,de,fe]}),r.a.createElement("label",{htmlFor:"passwordCheck"},"Re-enter password"),r.a.createElement(ie.a,{name:"passwordCheck",type:"password",component:me,validate:[pe,Ee]}),r.a.createElement("label",null,"What area is bothering you?"),r.a.createElement(ie.a,{name:"condition",component:"select"},"Upper Back",r.a.createElement("option",null),r.a.createElement("option",null,"Upper Back"),r.a.createElement("option",null,"Lower Back"),r.a.createElement("option",null,"Shoulder")),r.a.createElement("button",{type:"submit",disabled:this.props.pristine||this.props.submitting},"Submit"))}}]),t}(r.a.Component),ve=Object(o.b)(function(e){return{users:e.reducer.users,authStatus:e.reducer.authStatus,conditions:e.reducer.conditions}})(Object(le.a)({form:"registration",onSubmitFail:function(e,t){console.log({errors:e}),t(Object(ue.a)("registration",Object.keys(e)[0]))}})(ge));n(246);var be=Object(o.b)(function(e){return{loggedIn:null!==e.auth.currentUser.username}})(function(e){return e.loggedIn?r.a.createElement(ce.a,{to:"/dashboard"}):r.a.createElement("div",{className:"registrationHome"},r.a.createElement("h2",null,"Register for Foo App"),r.a.createElement(ve,null),r.a.createElement("div",{className:"registrationHomeLoginLink"},r.a.createElement(se.a,{to:"/login"},"Already have an account? Login")))}),Oe=function(e){function t(){return Object(q.a)(this,t),Object(Q.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(K.a)(t,[{key:"handleClick",value:function(e){e.preventDefault(),"incomplete"===this.props.treatmentObject.status?this.props.treatmentObject.status="complete":this.props.treatmentObject.status="incomplete",this.props.dispatch(_(this.props.treatmentObject))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"markCompleteWrapper"},r.a.createElement("button",{id:"button",name:"markComplete",onClick:function(t){return e.handleClick(t)},variant:"primary"},this.props.treatmentObject.status))}}]),t}(r.a.Component),ye=Object(o.b)()(Oe);n(247);function je(e){var t=e.treatmentInstruction.steps.map(function(e,t){var n=t+1;return r.a.createElement("li",{key:t},n,". ",e)});return r.a.createElement("div",{className:"treatment"},r.a.createElement("p",{className:"treatmentHeader"}," Video Instructions for ",e.treatment,":"),r.a.createElement("div",{className:"videoWrapper"},r.a.createElement("iframe",{title:e.treatment,src:"".concat(e.treatmentInstruction.video),frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),r.a.createElement("p",{className:"stepsHeader"}," Step-by-step Instructions for ",e.treatment,": "),r.a.createElement("ul",{className:"stepByStepList"},t))}var Ne=function(e){function t(){return Object(q.a)(this,t),Object(Q.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(K.a)(t,[{key:"getTreatment",value:function(){return this.props.treatment?this.props.treatment:Object.values(this.props.match.params)[0].substring(1)}},{key:"render",value:function(){var e=this.getTreatment(),t=this.props.treatments.find(function(t){return Object.keys(t)[1].toString()===e})[e];return r.a.createElement("div",{className:"instructionsPageWrapper"},r.a.createElement("h2",null,"Instructions for: ",e.toString()),r.a.createElement(je,{treatment:e,treatmentInstruction:t}),r.a.createElement("p",null,"---------------------"))}}]),t}(r.a.Component),Te=Object(o.b)(function(e){return{user:e.auth.currentUser,treatments:e.reducer.treatments,activeUser:e.reducer.activeUser,authStatus:e.reducer.authStatus,condition:e.auth.currentUser.condition}})(Ne);n(248);var ke=function(e){function t(){return Object(q.a)(this,t),Object(Q.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(K.a)(t,[{key:"findTreatment",value:function(e){for(var t=this.props.conditions.length,n=0;n<t;n++){var a=this.props.conditions[n];if(a[e])return a[e]}return"NO MATCH"}},{key:"instructionList",value:function(){return this.findTreatment(this.props.condition).map(function(e,t){return r.a.createElement("li",{key:t,className:"instructionBlock"},r.a.createElement(Te,{treatment:e}))})}},{key:"list",value:function(){var e=this,t=this.props.condition;console.log("myCondition",t);var n=this.findTreatment(t),a=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")}(new Date);return console.log("yourTreatment",n),n.map(function(t){var n="",o=!1;n="incomplete",e.props.user.log.map(function(e){var r=Object.keys(e).toString();if(a===r){o=!0;var c=e[r][t];return n=c||"incomplete"}return n="incomplete"});var c={currentUser:e.props.user,treatment:t,date:a,status:n,dateExists:o};return r.a.createElement("li",{key:t,className:"treatmentBlock"},r.a.createElement("div",{className:"treatmentItemContainer"},r.a.createElement(se.a,{to:"/instructions/:".concat(t)}," ",t)),r.a.createElement("div",{className:"treatmentStatusContainer"},r.a.createElement(ye,{treatmentObject:c})))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"treatmentPageWrapper"},r.a.createElement("p",null,r.a.createElement("span",{className:"mainLabel"},"Welcome")," ",this.props.username),r.a.createElement("p",null,r.a.createElement("span",{className:"mainLabel"},"Your condition is")," ",this.props.condition," pain"),r.a.createElement("p",null,r.a.createElement("span",{className:"mainLabel"},"Today's exercise program:")," "),r.a.createElement("ul",{className:"listContainer"},r.a.createElement("li",{className:"treatmentBlock"},r.a.createElement("div",{className:"DBcolumn1Header"},"Treatment Name"),r.a.createElement("div",{className:"DBcolumn2Header"},"Treatment Status")),this.list()),r.a.createElement("div",{className:"treatmentInstruction"},this.instructionList()))}}]),t}(r.a.Component),Se=Object(o.b)(function(e){return{user:e.auth.currentUser,username:e.auth.currentUser.username,treatments:e.reducer.treatments,conditions:e.reducer.conditions,condition:e.auth.currentUser.condition}})(ke);n(249);var Ue=Object(o.b)(function(e){return{loggedIn:null!==e.auth.currentUser.username}})(function(e){return e.loggedIn?r.a.createElement(ce.a,{to:"/dashboard"}):r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"heroBox"},r.a.createElement("div",{className:"shadingContainer"},r.a.createElement("h1",{className:"pageTitle"},"Free Physical Therapy Online"))),r.a.createElement("div",{className:"mainContentWrapper"},r.a.createElement("h3",null,"STOP! Before you undergo surgery consider physical therapy."),r.a.createElement("div",{className:"boxesWrapper"},r.a.createElement("div",{className:"treatmentsWrapper"},r.a.createElement("p",{className:"treatments title"},r.a.createElement("span",{className:"strong"},"92% cure rate for:")),r.a.createElement("ul",{className:"homepageList"},r.a.createElement("li",{className:"lpList"},"Upper Back Pain"),r.a.createElement("li",{className:"lpList"},"Lower Back Pain"),r.a.createElement("li",{className:"lpList"},"Shoulder Pain"))),r.a.createElement("div",{className:"featuresWrapper"},r.a.createElement("p",{className:"features title"},r.a.createElement("span",{className:"strong"},"Sign up to get free:")),r.a.createElement("ul",{className:"homepageList"},r.a.createElement("li",{className:"lpList"},"Treatment plans"),r.a.createElement("li",{className:"lpList"},"Progress tracker"),r.a.createElement("li",{className:"lpList"},"How-to videos"),r.a.createElement("li",{className:"lpList"},"Step by step instructions")),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement("div",{className:"leftButton"},r.a.createElement("button",{className:"standardButton loginButton"},r.a.createElement(se.a,{className:"buttonText",to:"/login"},"Log In"))),r.a.createElement("div",{className:"rightButton"},r.a.createElement("button",{className:"standardButton registerButton"},r.a.createElement(se.a,{className:"buttonText",to:"/register"},"Register")))))),r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,r.a.createElement("span",{className:"strong"},"Test Account")),r.a.createElement("p",null," - username: N@n"),r.a.createElement("p",null," - password: Hello12345"),r.a.createElement("p",null,r.a.createElement("span",{className:"strong"},"NOTE:"),"All content is  placeholder and taken from third party sources. The production version of this site will have custom content"))))});n(250);var we=function(e){function t(){return Object(q.a)(this,t),Object(Q.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(K.a)(t,[{key:"findTreatment",value:function(e){for(var t=this.props.conditions.length,n=0;n<t;n++){var a=this.props.conditions[n];if(a[e])return a[e]}return"NO MATCH"}},{key:"parseLogEntry",value:function(e,t){var n=Object.keys(e[t]),a=n.map(function(n){return e[t][n]});return[n,a]}},{key:"priorList",value:function(){for(var e=this,t=this.props.user.log,n=this.props.user.treatments.map(function(e,t){return r.a.createElement("div",{key:t,className:"treatment"},r.a.createElement("div",{className:"treatmentname"}),r.a.createElement("div",{className:"status"}))}),a=t.map(function(e){return Object.keys(e).toString()}),o=[],c=function(c){var s=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")}(new Date-864e5*c);if(a.includes(s)){var i=t.filter(function(e){return e[s]})[0],l=e.parseLogEntry(i,s),u=l[0],m=l[1],p=r.a.createElement("div",{className:"daysBackDate"},s),d=u.map(function(e,t){return r.a.createElement("div",{key:e,className:"treatment"},r.a.createElement("div",{className:"treatmentname"},e,":"),r.a.createElement("div",{className:"status"},m[t]))});o.push(r.a.createElement(r.a.Fragment,{key:c},r.a.createElement("li",{key:c},r.a.createElement("div",{className:"treatmentDate"},p),r.a.createElement("div",{className:"treatmentBox"},r.a.createElement("div",{className:"daysBackTreatment"},d)))))}else o.push(r.a.createElement(r.a.Fragment,{key:c},r.a.createElement("li",{key:c},r.a.createElement("div",{className:"treatmentDate"},r.a.createElement("div",{className:"daysBackDate"},s)),r.a.createElement("div",{className:"treatmentBox"},r.a.createElement("div",{className:"daysBackTreatment"},n)))))},s=0;s<=30;s++)c(s);return o}},{key:"render",value:function(){return r.a.createElement("div",{className:"historyPageWrapper"},r.a.createElement("p",null,"Over the past month, you've completed the following treatments: "),r.a.createElement("ul",null,r.a.createElement("li",{className:"treatmentBlock"},r.a.createElement("div",{className:"column0Header"},"Treatment Date"),r.a.createElement("div",{className:"column1Header"},"Treatment")),this.priorList()),r.a.createElement("p",null,"---------------------"))}}]),t}(r.a.Component),Ae=Object(o.b)(function(e){return{user:e.auth.currentUser,username:e.auth.currentUser.username,treatments:e.reducer.treatments,conditions:e.reducer.conditions,condition:e.auth.currentUser.condition}})(we),Re=function(e){function t(){return Object(q.a)(this,t),Object(Q.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(e){E(),this.props.dispatch(A()),this.props.dispatch({type:"CLEAR_USER"})}},{key:"render",value:function(){return r.a.createElement("div",null,"logged out")}}]),t}(r.a.Component),Ce=Object(o.b)(function(e){return{}})(Re),De=(n(251),function(e){function t(){return Object(q.a)(this,t),Object(Q.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(K.a)(t,[{key:"onSubmit",value:function(e){var t=this;return this.props.dispatch(W(e.username,e.password)).then(function(){t.props.dispatch(b)})}},{key:"render",value:function(){var e,t=this;return this.props.error&&(e=r.a.createElement("div",{className:"form-error","aria-live":"polite"},this.props.error)),r.a.createElement("form",{className:"login-form",onSubmit:this.props.handleSubmit(function(e){return t.onSubmit(e)})},e,r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(ie.a,{component:me,type:"text",name:"username",id:"username",validate:[pe,de]}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(ie.a,{component:me,type:"password",name:"password",id:"password",validate:[pe,de]}),r.a.createElement("button",{disabled:this.props.pristine||this.props.submitting},"Log in"))}}]),t}(r.a.Component)),Ie=Object(le.a)({form:"login",onSubmitFail:function(e,t){return t(Object(ue.a)("login","username"))}})(De);var Le=Object(o.b)(function(e){return{loggedIn:null!==e.auth.currentUser.username}})(function(e){return e.loggedIn?r.a.createElement(ce.a,{to:"/dashboard"}):r.a.createElement("div",{className:"loginHome"},r.a.createElement("h2",null,"Welcome to Foo App"),r.a.createElement(Ie,null),r.a.createElement("div",{className:"loginHomeRegLink"},r.a.createElement(se.a,{to:"/register"},"Don't have an account? Register")))}),Be=(n(252),function(e){function t(){return Object(q.a)(this,t),Object(Q.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(Z.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(e){var t=f();this.props.dispatch(function(e){var t;return e(g({loadingData:!0})),fetch("".concat(h,"/treatmentdata"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){e({type:"UPDATE_TREATMENT_STATE",treatments:t.treatmentslist})}).then(function(){return fetch("".concat(h,"/conditiondata"),{method:"GET"}).then(function(e){return e.json()}).then(function(t){e({type:"UPDATE_CONDITION_STATE",conditions:t.conditionslist})})}).then(function(){console.log("DONE LOADING CORE DATA"),e(g({loadingData:!1}))}).catch(function(n){return console.error(n),t="unauthenticated",console.log("STAT IS",t),e(g({loadingData:!1})),t})}),t?this.props.dispatch(b()):this.props.dispatch(v({loadingUser:!1}))}},{key:"componentDidUpdate",value:function(e){!e.loggedIn&&this.props.loggedIn?this.startPeriodicRefresh():e.loggedIn&&!this.props.loggedIn&&this.stopPeriodicRefresh()}},{key:"componentWillUnmount",value:function(){this.stopPeriodicRefresh()}},{key:"startPeriodicRefresh",value:function(){var e=this;this.refreshInterval=setInterval(function(){return e.props.dispatch(H())},36e5)}},{key:"stopPeriodicRefresh",value:function(){this.refreshInterval&&clearInterval(this.refreshInterval)}},{key:"render",value:function(){return this.props.loadingData||this.props.loadingUser?null:r.a.createElement("div",{className:"mainWrapper"},r.a.createElement(oe,{className:"navBarWrapper"}),r.a.createElement("div",{className:"bodyWrapper"},r.a.createElement(ne.a,null,r.a.createElement(ee.a,{exact:!0,path:"/",component:Ue}),r.a.createElement(ee.a,{exact:!0,path:"/login",component:Le}),r.a.createElement(ee.a,{exact:!0,path:"/register",component:be}),r.a.createElement(ee.a,{exact:!0,path:"/dashboard",component:Se}),r.a.createElement(ee.a,{exact:!0,path:"/history",component:Ae}),r.a.createElement(ee.a,{exact:!0,path:"/instructions/:treatment",component:Te}),r.a.createElement(ee.a,{exact:!0,path:"/logout",component:Ce}))))}}]),t}(r.a.Component)),_e=Object(te.a)(Object(o.b)(function(e){return console.log("STATE IS",e),{hasAuthToken:null!==e.auth.authToken,loggedIn:null!==e.auth.currentUser,users:e.reducer.users,treatments:e.reducer.treatments,activeUser:e.reducer.activeUser,authStatus:e.reducer.authStatus,loadingData:e.reducer.loadingData,loadingUser:e.reducer.loadingUser}})(Be)),Pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function We(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(r.a.createElement(o.a,{store:$},r.a.createElement(i.a,null,r.a.createElement(_e,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Pe?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):We(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):We(t,e)})}}()}},[[136,1,2]]]);
//# sourceMappingURL=main.991a6575.chunk.js.map